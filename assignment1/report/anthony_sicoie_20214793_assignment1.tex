
\documentclass[11pt]{article}
\usepackage[letterpaper, margin=1in]{geometry}

% Used to place appendix in the toc with proper titles
\usepackage[toc,page,title]{appendix}
\renewcommand{\appendixname}{Appendix} % Used to rename from "Appendices" to "Appendix"
\renewcommand{\appendixpagename}{Appendix} % Used to rename from "Appendices" to "Appendix"
\renewcommand{\appendixtocname}{Appendix} % Used to rename from "Appendices" to "Appendix"

% Used to make citations/bibliography
% Usage:
% \bibliography{./bibliography/fullbib.bib}
% \bibliographystyle{plain}
\usepackage{cite}

% To enable forcing figure placement
\usepackage{float}

% Used to skip to next paragraph when a blank line is used between sentences
\usepackage{parskip}

% Used to change line spacing (double spaced, 1.5, etc.)
% Usage: 
% \begin{spacing}{1.5}
% \end{spacing}
\usepackage{setspace}

% Used for inserting images.
% Usage: 
% \begin{figure}[hpt]
%     \centering
%     \caption{Caption}
%     \includegraphics[width=0.6\textwidth]{images/<IMG.NAME>}
%     \label{fig:<LABEL>}
% \end{figure}
\usepackage{graphicx}
\graphicspath{ {./images/} }

% Subplots
\usepackage{subcaption}

% Used for in text code with formatting and language highlighting
\usepackage{listings}
\usepackage{xcolor}

\usepackage[breaklinks]{hyperref}
\usepackage{url}

% Define custom style
\lstdefinestyle{mystyle}{
    basicstyle=\ttfamily\footnotesize, % Use a monospaced font with strict sizing
    numbers=left, % Show line numbers
    numbersep=5pt,
    numberstyle=\tiny\color{gray},
    stepnumber=1, % Ensures every line gets numbered
    tabsize=4, % Set tab width
    keepspaces=true, % Preserve spaces
    showspaces=false,
    showstringspaces=false,
    breaklines=true,
    breakatwhitespace=false,
    columns=fixed, % Maintain strict spacing
    lineskip=-1pt, % Prevent additional spacing between lines
    frame=single, % Optional: adds a border around the code
    rulecolor=\color{black},
    backgroundcolor=\color{white},
    keywordstyle=\color{blue}\bfseries, % Style for keywords
    stringstyle=\color{red}, % Style for strings
    commentstyle=\color{gray}, % Style for comments
    xleftmargin=5pt, % Adjusts left margin outside the frame
    xrightmargin=5pt % Adjusts right margin outside the frame
}
\renewcommand{\lstlistingname}{Code Block}


\lstset{style=mystyle}

% Used to create hyperlink references that can be clicked within the PDF
% Usage: \ref{<SECTIONLABEL>}
\usepackage{hyperref}

% Used for certain math symbols
\usepackage{amssymb}

\usepackage{array}
\usepackage{ragged2e}

\usepackage{titlesec}
\usepackage{bookmark}

\setlength\parindent{0pt}

\title{%
  ELEC 873 \\
Assignment 1}

\author{Anthony Sicoie (20214793)}

\begin{document}

\maketitle


\section*{Q1:}

\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{MPI code for question 1}, label={q1:mpi}]{../q1/mpi.c}
\lstinputlisting[language=C, caption=\centering{OpenMP code for question 1}, label={q1:openmp}]{../q1/openmp.c}
\lstinputlisting[language=C, caption=\centering{Pthread code for question 1}, label={q1:pthread}]{../q1/pthread.c}

\subsection*{Logs:}
All code was run with 5 processes/threads, though any number can be set via the Makefile \texttt{make runall n=<number\_of\_threads/processes>} directive. 
% This can be seen in the Code Block \ref{a:make} of the appendix where the makefile code is provided
\lstinputlisting[language=sh, caption=\centering{MPI output for question 1}, label={q1:mpilog}]{../q1/mpi.log}
\lstinputlisting[language=sh, caption=\centering{OpenMP output for question 1}, label={q1:openmplog}]{../q1/openmp.log}
\lstinputlisting[language=sh, caption=\centering{Pthread output for question 1}, label={q1:pthreadlog}]{../q1/pthread.log}

\section*{Q2:}

\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{MPI code for question 2}, label={q2:mpi}]{../q2/mpi.c}
\lstinputlisting[language=C, caption=\centering{OpenMP code for question 2}, label={q2:openmp}]{../q2/openmp.c}
\lstinputlisting[language=C, caption=\centering{Pthread code for question 2}, label={q2:pthread}]{../q2/pthread.c}

\subsection*{Logs:}
\lstinputlisting[language=sh, caption=\centering{MPI output for question 2}, label={q2:mpilog}]{../q2/mpi.log}
\lstinputlisting[language=sh, caption=\centering{OpenMP output for question 2}, label={q2:openmplog}]{../q2/openmp.log}
\lstinputlisting[language=sh, caption=\centering{Pthread output for question 2}, label={q2:pthreadlog}]{../q2/pthread.log}

\section*{Q3:}

\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{OpenMP code for question 3}, label={q3:openmp}]{../q3/openmp.c}

\subsection*{Logs:}
\lstinputlisting[language=sh, caption=\centering{OpenMP output for question 3}, label={q3:openmplog}]{../q3/openmp.log}

\section*{Q4:}

\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{MPI code for question 4}, label={q4:mpi}]{../q4/mpi.c}

\subsection*{Logs:}
\lstinputlisting[language=sh, caption=\centering{MPI output for question 4}, label={q4:mpilog}]{../q4/mpi.log}

\section*{Q5:}

\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{MPI code for question 5}, label={q5:mpi}]{../q5/mpi.c}

\subsection*{Logs:}
\lstinputlisting[language=sh, caption=\centering{MPI output for question 5}, label={q5:mpilog}]{../q5/mpi.log}

\section*{Q6:}

\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{MPI code for question 6}, label={q6:mpi}]{../q6/mpi.c}

\subsection*{Logs:}
\lstinputlisting[language=sh, caption=\centering{MPI output for question 6}, label={q6:mpilog}]{../q6/mpi.log}

\section*{Q7:}
\subsection*{Analysis:}


\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{MPI code for question 7}, label={q7:mpi}]{../q7/mpi.c}
\lstinputlisting[language=C, caption=\centering{OpenMP code for question 7}, label={q7:openmp}]{../q7/openmp.c}
\lstinputlisting[language=C, caption=\centering{Pthread code for question 7}, label={q7:pthread}]{../q7/pthread.c}
\lstinputlisting[language=C, caption=\centering{Hybrid (MPI+OpenMP) code for question 7}, label={q7:hybrid}]{../q7/hybrid.c}

\subsection*{Logs:}
\lstinputlisting[language=sh, caption=\centering{MPI output for question 7}, label={q7:mpilog}]{../q7/mpi.log}
\lstinputlisting[language=sh, caption=\centering{OpenMP output for question 7}, label={q7:openmplog}]{../q7/openmp.log}
\lstinputlisting[language=sh, caption=\centering{Pthread output for question 7}, label={q7:pthreadlog}]{../q7/pthread.log}
\lstinputlisting[language=sh, caption=\centering{Hybrid (MPI+OpenMP) output for question 7}, label={q7:hybridlog}]{../q7/hybrid.log}

\section*{Q8:}
\subsection*{Analysis:}

\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{MPI code for question 8 static assignment}, label={q8:mpiStatic}]{../q8/mpi_static.c}
\lstinputlisting[language=C, caption=\centering{MPI code for question 8 dynamic assignment}, label={q8:mpiStatic}]{../q8/mpi_dynamic.c}

\subsection*{Output:}

\section*{Q9:}

\subsection*{Code:}
\lstinputlisting[language=C, caption=\centering{MPI code for question 9}, label={q9:mpi}]{../q9/mpi.c}

\subsection*{Log:}
\lstinputlisting[language=sh, caption=\centering{MPI output for question 9}, label={q9:mpilog}]{../q9/mpi.log}

\begin{appendices}\label{appendix}
  \lstinputlisting[language=make, caption=\centering{Makefile template used for all code}, label={a:make}]{../q1/makefile}
  \lstinputlisting[language=make, caption=\centering{Bash script used to vary process, thread, and array size for question 7}, label={a:make}]{../q7/run.sh}
  \lstinputlisting[language=make, caption=\centering{Python script used to plot results for question 7}, label={a:make}]{../q7/results.py}
  \lstinputlisting[language=make, caption=\centering{Bash script used to process counts for question 8}, label={a:make}]{../q8/run.sh}
  \lstinputlisting[language=make, caption=\centering{Python script used to plot results for question 9}, label={a:make}]{../q8/results.py}
\end{appendices}

\newpage

% \bibliography{./bibliography/master.bib}
% \bibliographystyle{IEEEtran}

\end{document}
